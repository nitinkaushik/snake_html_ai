<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Snake Game (Arrow Keys in All Directions)</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    #gameCanvas {
      display: block;
      margin: 0 auto;
      background: #eee;
      border: 1px solid #000;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="400"></canvas>

<script>
//===== SETUP =====
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Snake body is an array of segments, each segment has (x, y).
// We'll start with 5 segments in a horizontal line.
let snake = [
  {x: 200, y: 200},
  {x: 180, y: 200},
  {x: 160, y: 200},
  {x: 140, y: 200},
  {x: 120, y: 200},
];
const segmentSize = 20;  // each segment is a 20x20 square

// Directions: we store current direction as dx, dy (unit vectors)
let dx = 1;  // moving right initially
let dy = 0;

// Initial speed. We'll increase it slowly during the game.
let speed = 2;

//===== GAME LOOP =====
function gameLoop() {
  // Continuously increase speed
  speed += 0.001;

  updateSnake();
  drawAll();

  requestAnimationFrame(gameLoop);
}

//===== UPDATE SNAKE =====
function updateSnake() {
  // Calculate new head position
  const headX = snake[0].x + dx * speed;
  const headY = snake[0].y + dy * speed;

  // Add new head to the front of the snake array
  snake.unshift({x: headX, y: headY});

  // Pop off the last segment to maintain the same length
  snake.pop();

  // If you want the snake to stay in-bounds, you could clamp
  // the headX and headY to the canvas boundaries here (optional).
}

//===== DRAW EVERYTHING =====
function drawAll() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw snake
  ctx.fillStyle = "green";
  snake.forEach(segment => {
    ctx.fillRect(segment.x, segment.y, segmentSize, segmentSize);
  });
}

//===== KEYBOARD CONTROLS =====
document.addEventListener('keydown', e => {
  switch(e.key) {
    case "ArrowUp":
      // prevent reversing directly down if already going up
      if (dy === 0) { dx = 0; dy = -1; }
      break;
    case "ArrowDown":
      if (dy === 0) { dx = 0; dy = 1; }
      break;
    case "ArrowLeft":
      if (dx === 0) { dx = -1; dy = 0; }
      break;
    case "ArrowRight":
      if (dx === 0) { dx = 1; dy = 0; }
      break;
  }
});

//===== START GAME =====
gameLoop();
</script>
</body>
</html>
